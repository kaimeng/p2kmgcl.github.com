<!DOCTYPE html>
<html lang="es">
<head>	<meta charset="utf-8" />
	<title>					Usando const en C++ con objetos | 
				Pablo Molina | Piensa, inventa, comparte
	</title>

	<meta name="keywords" content="Diseño web, Programación, Tecnología, Internet, Web Design, Programation, Technology" />
	<meta name="description" content=" Blog personal de Pablo Molina sobre diseño web, programación, asuntos geek y, a veces, sencillamente cosas personales." />
	<meta name="generator" content="Pelican" />

	<meta name="viewport" content="width=device-width"/>

	<link href="http://p2kmgcl.com/feeds/all.rss" type="application/rss+xml" rel="alternate" title="p2kmgcl Full RSS Feed" />	<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml">

	<link rel="stylesheet" href="../../theme/styles/codehilite.css" />
	<link rel="stylesheet" href="../../theme/styles/font-awesome.min.css" />
	<link rel="stylesheet" href="../../theme/styles/font-awesome-ie7.min.css" />
	<link rel="stylesheet" href="../../theme/styles/themes/loremipsum.css" />

	<script src="../../theme/scripts/vendor/prefixfree.min.js"></script>
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-17072152-2']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>
</head>

<body>
	<header id="mainHeader">
		<h1><a href="../..">p2kmgcl</a></h1>
		<nav id="mainMenu">
			<h1>Menú principal</h1>
			<ul>
				<li >
					<i class="icon-home"></i>
					<a href="../..">Index</a>
				</li>
				
															<li><i class="icon-user"></i><a href="../../pages/contact.html">¿Quien soy?</a></li>
											<li><i class="icon-file-alt"></i><a href="../../pages/curriculum.html">Currículum</a></li>
												</ul>
		</nav>
	</header>

	<aside id="mainSidebar">
		<div id="vcard" itemscope itemtype="http://schema.org/Person">
			<h1>¿Quién soy?</h1>
			<figure class="profile">
				<img alt="Foto de perfil de Pablo Molina" title="Foto de perfil de Pablo Molina" src="http://dl.dropbox.com/u/6037255/perfil.jpg" width="75" height="75" itemprop="image" />
				<figcaption>
					<span itemprop="name">Pablo Molina</span>
					<a href="mailto:p2kmgcl@gmail.com" itemprop="email">p2kmgcl@gmail.com</a>
				</figcaption>
			</figure>
			<ul class="social">
				<li class="rss">
					<i class="icon-rss"></i>
					<a href="http://p2kmgcl.com/feeds/all.rss" type="application/rss+xml" target="_blank">RSS</a>
				</li>
									<li class="Google+">
						<i class="icon-google-plus"></i>
						<a href="https://plus.google.com/117214944861012231268/" target="_blank">Google+</a>
					</li>
									<li class="GitHub">
						<i class="icon-github"></i>
						<a href="https://github.com/p2kmgcl" target="_blank">GitHub</a>
					</li>
									<li class="Twitter">
						<i class="icon-twitter"></i>
						<a href="https://twitter.com/#!/p2kmgcl" target="_blank">Twitter</a>
					</li>
									<li class="Facebook">
						<i class="icon-facebook"></i>
						<a href="https://www.facebook.com/p2kmgcl" target="_blank">Facebook</a>
					</li>
									<li class="LinkedIn">
						<i class="icon-linkedin"></i>
						<a href="http://es.linkedin.com/pub/pablo-molina/34/b06/180" target="_blank">LinkedIn</a>
					</li>
									<li class="LastFm">
						<i class="icon-music"></i>
						<a href="http://www.lastfm.es/user/p2kmgcl" target="_blank">LastFm</a>
					</li>
									<li class="DeviantArt">
						<i class="icon-pencil"></i>
						<a href="http://p2kmgcl.deviantart.com/" target="_blank">DeviantArt</a>
					</li>
									<li class="Youtube">
						<i class="icon-facetime-video"></i>
						<a href="http://www.youtube.com/p2kmgcl" target="_blank">Youtube</a>
					</li>
							</ul>
		</div>
	</aside>
    <section id="mainContent">
        <h1>Contenido principal</h1>
        <article class="entry single General cover">
            <header class="entryHeader">
                <h1 class="title">
    Usando const en C++ con objetos    </h1>
        <time class="published"
          title="24/08/2012"
          datetime="2012-08-24T00:00:00">
          24/08/2012
    </time>
        <span class="author">Autor: Pablo Molina</span>
        <figure class="cover">
        <img src="http://3.bp.blogspot.com/-DOgSFKOoCVw/UDdXCheQfPI/AAAAAAAAh5Y/vXVrgJdvNR4/s400/Dibujo.JPG"
             alt="Logo de C++ con una función que devuelve una referencia constante"
             title="Logo de C++ con una función que devuelve una referencia constante"
        />
    </figure>
    
    
            </header>
            <section class="entryContent" id="content">
                <p>Hace una semana y pico <a href="https://plus.google.com/u/0/112373452810480328056/">David</a> me comentó que había estado debatiendo con <a href="https://plus.google.com/u/0/110730426033836231511/">Soraya</a> el uso que tenía el <strong>const</strong> dentro de c++, y si realmente funcionaría bien con objetos en lugar de tipos simples. Para los que no lo sepáis, en el lenguaje c++ y en c los objetos por defecto se "pasan" por copia, es decir, cuando ponemos como parámetro de una función una variable, la función usará una copia de ésta y no la original, dejando a la primera intacta.
Como he dicho, este comportamiento es solo por defecto y podemos alterarlo usando punteros (una variable que sólo guarda una dirección de memoria, lo cual ocupa bastante menos espacio que la mayoría de los objetos), o, en c++, una referencia, que nos es más que indicar que la variable que queremos proporcionar es la original y no una copia. Como podéis imaginar, estos dos métodos <strong>son mucho más eficientes que el paso por copia</strong>, en el sentido de que cuesta mucho menos computacionalmente hablando copiar una dirección de memoria o usar el mismo objeto que generar uno nuevo similar.</p>
<h1>Usando el const</h1>
<p>En este punto es donde entra el uso de const, esta palabra usada junto a una variable <strong>impide que sea modificada a lo largo del código</strong>, pudiendo pasar esta variable mediante un puntero a ella o por referencia pero con la seguridad de que no será modificada. Un ejemplo:</p>
<div class="codehilite"><pre><span class="n">function</span> <span class="nf">ordenaVector</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span> <span class="n">v</span><span class="p">,</span> <span class="k">const</span> <span class="kt">int</span><span class="o">&amp;</span> <span class="n">tam</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Intentamos modificar la variable tam</span>
    <span class="n">tam</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>En este código el cometido de la variable tam es proporcionarnos el número de elementos que se guardan en el vector v, por ello no tendría sentido modificar la variable. Al usar const se nos asegura que la variable no será modificada, de hecho, sin intentamos compilar el código anterior el propio compilador nos dirá que no podemos modificar una variable constante y abortará la ejecución.</p>
<h1>Const y objetos como parámetros</h1>
<p>Y en este punto es donde surge la pregunta: ¿cómo se comporta un objeto constante cuando llamamos a sus métodos? Pues bien, la respuesta es sencilla y compleja a la vez: el compilador se comporta de una forma bastante inteligente en estos casos, ya que sólo nos impedirá llamar a los métodos de un objeto constante si éstos son modificadores, es decir, si alteran el contenido de los atributos del objeto. De esta forma, en el siguiente objeto:</p>
<div class="codehilite"><pre><span class="k">class</span> <span class="nc">Pelota</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Pelota</span><span class="p">()</span><span class="o">:</span> <span class="n">tam</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">{};</span>
    <span class="kt">void</span> <span class="nf">setTam</span><span class="p">(</span><span class="kt">int</span> <span class="n">tam</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">tam</span> <span class="o">=</span> <span class="n">tam</span><span class="p">;</span> <span class="p">};</span>
    <span class="kt">int</span> <span class="nf">getTam</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">tam</span><span class="p">;</span> <span class="p">};</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">tam</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">const</span> <span class="n">Pelota</span> <span class="n">p1</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>Se nos permitirá llamar al método <code>getTam()</code> de <code>p1</code>, pero no al método <code>setTam()</code>, ya que éste último modifica el valor del atributo <code>tam</code>.</p>
<h1>Conclusión</h1>
<p>Seguramente alguno habrá pensado que el uso de const es opcional ya que podemos usar punteros y referencias y esperando que los métodos llamados no modifiquen el valor de las variables, pero es una forma más de añadir consistencia a nuestro código eliminando algunas posibles fugas que nos pueden provocar un quebradero de cabeza.</p>
            </section>
            <footer class="entryFooter">
                <section class="share">
        <a class="a2a_dd" href="http://www.addtoany.com/share_save?linkurl=2012/08/usando-const-en-c-con-objetos.html">
            <i class="icon-share"></i>Compartir
        </a>
        <script type="text/javascript">
        var a2a_config = a2a_config || {};
        a2a_config.linkname = "Usando const en C++ con objetos";
        a2a_config.linkurl = "2012/08/usando-const-en-c-con-objetos.html";
        a2a_config.locale = "es";
        a2a_config.num_services = 6;
        a2a_config.prioritize = ["google_plus", "facebook", "twitter", "tuenti", "reddit", "email"];
        </script>
        <script type="text/javascript" src="http://static.addtoany.com/menu/page.js"></script>
    </section>
                <section class="tags">
        <h1><i class="icon-tags"></i>Etiquetas</h1>
        <ul>
        <li><a href="/tag/analisis.html">Análisis</a></li><li><a href="/tag/c.html">C</a></li><li><a href="/tag/c.html">C++</a></li><li><a href="/tag/const.html">Const</a></li><li><a href="/tag/programacion.html">Programación</a></li>        </ul>
    </section>
                <section class="comments">
        <h1>Comentarios</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_shortname = 'p2kmgcl',
                // No usa la url al generar las entradas, asi evita problemas si se cambia de dominio
                disqus_identifier = '/2012/08/usando-const-en-c-con-objetos.html';
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </section>
            </footer>
        </article>
    </section>
    <footer id="mainFooter">        <section id="license">
            <h1>Licencia</h1>
            <figure>
                <img src="http://i.creativecommons.org/l/by/3.0/88x31.png" alt="Licencia Creative Commons By" title="Licencia Creative Commons By" />
                <figcaption>Todo esto es tuyo, tan solo recuerda mi nombre.</figcaption>
            </figure>
        </section>
        <section id="ownerInfo">
            <h1>Propietario</h1>
            <span>Administrador, propietario y diseñador: Pablo Molina &lt;<a href="mailto:p2kmgcl@gmail.com">p2kmgcl@gmail.com</a>&gt;.</span>
        </section>
        <section id="webTags">
            <h1>Etiquetas de la web</h1>
            <ul>
                <li><a href="http://www.w3.org/html/logo/"><img src="http://www.w3.org/html/logo/badge/html5-badge-h-css3-graphics-performance-semantics.png" width="229" height="64" alt="HTML5 Powered with CSS3 / Styling, Graphics, 3D &amp; Effects, Performance &amp; Integration, and Semantics" title="HTML5 Powered with CSS3 / Styling, Graphics, 3D &amp; Effects, Performance &amp; Integration, and Semantics"></a></li>
                <li><a href="http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fp2kmgcl.com%2Ftheme%2Fstyles%2Fthemes%2Floremipsum.css&profile=css3&usermedium=all&warning=1"><img style="border:0;width:88px;height:31px" src="http://jigsaw.w3.org/css-validator/images/vcss-blue" alt="¡CSS Válido!" /></a></li>
            </ul>
        </section>
    </footer>

    <script src="../../theme/scripts/vendor/modernizr.min.js"></script>
    <script src="../../theme/scripts/vendor/jquery.min.js"></script>
    <script src="../../theme/scripts/main.js"></script>
</body>
</html>